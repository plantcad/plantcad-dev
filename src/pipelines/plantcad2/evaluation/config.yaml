# Pipeline configuration for PlantCAD2 zero-shot evaluation tasks

executor:
  prefix: s3://oa-plantcad-dev/pipelines/_dev_pc2_eval_20251201_r5
  force_run_failed: true

models:
  - path: kuleshov-group/PlantCAD2-Small-l24-d0768
    type: mlm
    context_length: 8192
  - path: plantcad/marin_exp1729__pcv1_600m_c512__checkpoints
    type: clm
    context_length: 512
    subfolder: local_store/checkpoints/plantcad-train-600m-r16-a1bc43/hf/step-26782
  - path: kuleshov-group/PlantCaduceus_l20
    type: mlm
    context_length: 512
  - path: kuleshov-group/PlantCaduceus_l32
    type: mlm
    context_length: 512

compute:
  device: cuda
  batch_size: 48
  num_workers: null  # Auto-detect from available GPUs

sampling:
  rate: 1.0  # Shuffle without downsampling
  max_size: 10000
  seed: 42

# Dataset splits to evaluate (task+split combinations)
splits:
  # Acceptor splice site tasks
  - task: acceptor_core_noncore_classification
    split: test_maize
  # - task: acceptor_core_noncore_classification
  #   split: test_tomato
  - task: acceptor_recovery
    split: test_maize
  # - task: acceptor_recovery
  #   split: test_tomato

  # # Conservation tasks
  - task: conservation_within_poaceae_non_tis
    split: test
  - task: conservation_within_andropogoneae
    split: test
  - task: conservation_within_poaceae_tis
    split: test

  # # Structural variant task
  # - task: structural_variant_effect_prediction
  #   split: test

  # # Donor splice site tasks
  - task: donor_core_noncore_classification
    split: test_maize
  # - task: donor_core_noncore_classification
  #   split: test_tomato
  - task: donor_recovery
    split: test_maize
  # - task: donor_recovery
  #   split: test_tomato

  # # Translation initiation site (TIS) tasks
  - task: tis_core_noncore_classification
    split: test_maize
  # - task: tis_core_noncore_classification
  #   split: test_tomato
  - task: tis_recovery
    split: test_maize
  # - task: tis_recovery
  #   split: test_tomato

  # # Translation termination site (TTS) tasks
  - task: tts_core_noncore_classification
    split: test_maize
  # - task: tts_core_noncore_classification
  #   split: test_tomato
  - task: tts_recovery
    split: test_maize
  # - task: tts_recovery
  #   split: test_tomato
