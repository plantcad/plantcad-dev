# Pipeline configuration for PlantCAD2 zero-shot evaluation tasks

executor:
  prefix: s3://oa-plantcad-dev/pipelines/pc2_eval_20251114_r1
  force_run_failed: true

models:
  - kuleshov-group/PlantCAD2-Small-l24-d0768

compute:
  device: cuda
  batch_size: 32
  num_workers: null  # Auto-detect from available GPUs

sampling:
  rate: 1.0  # Shuffle without downsampling
  max_size: 5000
  seed: 42

# Dataset splits to evaluate (task+split combinations)
# TODO: Add skipped tasks back once storage layer is more reliable
splits:
  # Acceptor splice site tasks
  - task: acceptor_core_noncore_classification
    split: test_maize
  # - task: acceptor_core_noncore_classification
  #   split: test_tomato
  - task: acceptor_recovery
    split: test_maize
  # - task: acceptor_recovery
  #   split: test_tomato

  # Conservation tasks
  - task: conservation_within_poaceae_non_tis
    split: test
  - task: conservation_within_andropogoneae
    split: test
  - task: conservation_within_poaceae_tis
    split: test

  # Structural variant task
  - task: structural_variant_effect_prediction
    split: test

  # Donor splice site tasks
  - task: donor_core_noncore_classification
    split: test_maize
  # - task: donor_core_noncore_classification
  #   split: test_tomato
  - task: donor_recovery
    split: test_maize
  # - task: donor_recovery
  #   split: test_tomato

  # Translation initiation site (TIS) tasks
  - task: tis_core_noncore_classification
    split: test_maize
  # - task: tis_core_noncore_classification
  #   split: test_tomato
  - task: tis_recovery
    split: test_maize
  # - task: tis_recovery
  #   split: test_tomato

  # Translation termination site (TTS) tasks
  - task: tts_core_noncore_classification
    split: test_maize
  # - task: tts_core_noncore_classification
  #   split: test_tomato
  - task: tts_recovery
    split: test_maize
  # - task: tts_recovery
  #   split: test_tomato
